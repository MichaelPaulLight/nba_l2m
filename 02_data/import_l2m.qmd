```{r}
library(tidyverse)
```

```{r}
data <- read_csv("https://raw.githubusercontent.com/atlhawksfanatic/L2M/refs/heads/master/1-tidy/L2M/L2M_stats_nba.csv")
```
```{r}
recent_data <- data |> filter(date > "2024-07-01" & date < "2025-07-01") |> filter(decision %in% c("CC"))

recent_data |> group_by(disadvantaged) |> count(decision) |> arrange(desc(n))

data |> filter(date > "2024-07-01" & date < "2025-07-01") |> select(home_team, away_team, game_id) |> distinct() |> pivot_longer(cols = ends_with("team"), names_to = "team_location", values_to = "team") |> count(team) |> arrange(n)

data |> filter(date > "2024-07-01" & date < "2025-07-01") |> select(home_team, away_team, game_id) |> distinct() |> group_by(home_team, away_team) |> count() |> arrange(n)

data |> filter(date > "2024-07-01" & date < "2025-07-01") |> mutate(
    team_pair = case_when(
      home_team < away_team ~ paste(home_team, away_team, sep = " vs "),
      TRUE ~ paste(away_team, home_team, sep = " vs ")
    )
  ) |> 
  select(team_pair, game_id) |> 
  distinct() |> 
  count(team_pair)

data |> filter(date > "2024-07-01" & date < "2025-07-01") |> mutate(
    team_pair = case_when(
      home_team < away_team ~ paste(home_team, away_team, sep = " vs "),
      TRUE ~ paste(away_team, home_team, sep = " vs ")
    )
  ) |> 
  select(team_pair, game_id) |> 
  distinct() |> 
  count(team_pair) |> 
  count(n) |> 
  rename(games_in_data = n,
         team_pairs = nn)

```

